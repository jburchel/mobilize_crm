{% extends 'base.html' %}

{% block title %}Church Detail{% endblock %}

{% block content %}
    <h2>Church Detail</h2>
    <dl>
        <dt>Name</dt>
        <dd>{{ church.name }}</dd>
        <dt>Address</dt>
        <dd>{{ church.address }}</dd>
        <dt>Contact Person</dt>
        <dd>{{ church.contact_person }}</dd>
        <dt>Phone</dt>
        <dd>{{ church.phone }}</dd>
        <dt>Email</dt>
        <dd>{{ church.email }}</dd>
        <dt>People</dt>
        <dd>
            <ul>
            {% for person in church.people %}
                <li><a href="{{ url_for('people_bp.person_detail', person_id=person.id) }}">{{ person.name }}</a></li>
            {% endfor %}
            </ul>
        </dd>
    </dl>

    <h2>Edit Church</h2>
    <form method="POST" action="/edit_church/{{ church.id }}">
        <div class="form-group">
            <label>Name: <input name="name" value="{{ church.name }}" required></label>
            <label>Location: <input name="location" value="{{ church.location }}"></label>
            <label>Phone: <input name="phone" value="{{ church.phone }}"></label>
            <label>Email: <input type="email" name="email" value="{{ church.email }}"></label>
            <label>Main Contact:
                <select name="main_contact_id">
                    <option value="">None</option>
                    {% for person in people %}
                    <option value="{{ person.id }}" {% if church.main_contact_id == person.id %}selected{% endif %}>{{ person.name }}</option>
                    {% endfor %}
                </select>
            </label>
            <button type="submit">Save Changes</button>
        </div>
    </form>

    <p><a href="{{ url_for('churches_bp.churches') }}">Back to Churches</a></p>
{% endblock %}
