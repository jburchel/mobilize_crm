{% extends 'base.html' %}

{% block title %}Edit Person{% endblock %}

{% block content %}
    <h2>Edit Person</h2>
    <form method="POST" action="/edit_person/{{ person.id }}">
        <div class="form-group">
            <label>Title: <input name="title" value="{{ person.title }}"></label>
            <label>First Name: <input name="first_name" value="{{ person.first_name }}" required></label>
            <label>Last Name: <input name="last_name" value="{{ person.last_name }}"></label>
            <label>Email: <input type="email" name="email" value="{{ person.email }}"></label>
            <label>Phone: <input name="phone" value="{{ person.phone }}"></label>
            <label>Preferred Contact Method: 
                <select name="preferred_contact_method">
                    <option value="">None</option>
                    <option value="email" {% if person.preferred_contact_method == 'email' %}selected{% endif %}>Email</option>
                    <option value="phone" {% if person.preferred_contact_method == 'phone' %}selected{% endif %}>Phone</option>
                    <option value="text" {% if person.preferred_contact_method == 'text' %}selected{% endif %}>Text</option>
                    <option value="facebook_messenger" {% if person.preferred_contact_method == 'facebook_messenger' %}selected{% endif %}>Facebook Messenger</option>
                    <option value="whatsapp" {% if person.preferred_contact_method == 'whatsapp' %}selected{% endif %}>Whatsapp</option>
                    <option value="groupme" {% if person.preferred_contact_method == 'groupme' %}selected{% endif %}>Groupme</option>
                    <option value="signal" {% if person.preferred_contact_method == 'signal' %}selected{% endif %}>Signal</option>
                    <option value="other" {% if person.preferred_contact_method == 'other' %}selected{% endif %}>Other</option>
                </select>
            </label>
            <label>Street Address: <input name="street_address" value="{{ person.street_address }}"></label>
            <label>City: <input name="city" value="{{ person.city }}"></label>
            <label>State: <input name="state" value="{{ person.state }}"></label>
            <label>Zip Code: <input name="zip_code" value="{{ person.zip_code }}"></label>
            <label>Home Country: <input name="home_country" value="{{ person.home_country }}"></label>
            <label>Role: 
                <select name="role">
                    <option value="Contact" {% if person.role == 'Contact' %}selected{% endif %}>Contact</option>
                    <option value="Member" {% if person.role == 'Member' %}selected{% endif %}>Member</option>
                    <option value="Leader" {% if person.role == 'Leader' %}selected{% endif %}>Leader</option>
                    <option value="Pastor" {% if person.role == 'Pastor' %}selected{% endif %}>Pastor</option>
                </select>
            </label>
            <label>Church: 
                <select name="church_id">
                    <option value="">None</option>
                    {% for church in churches %}
                    <option value="{{ church.id }}" {% if person.church_id == church.id %}selected{% endif %}>{{ church.church_name }}</option>
                    {% endfor %}
                </select>
            </label>
            <label>Marital Status:
                <select name="marital_status">
                    <option value="">None</option>
                    <option value="single" {% if person.marital_status == 'single' %}selected{% endif %}>Single</option>
                    <option value="married" {% if person.marital_status == 'married' %}selected{% endif %}>Married</option>
                    <option value="divorced" {% if person.marital_status == 'divorced' %}selected{% endif %}>Divorced</option>
                    <option value="widowed" {% if person.marital_status == 'widowed' %}selected{% endif %}>Widowed</option>
                    <option value="separated" {% if person.marital_status == 'separated' %}selected{% endif %}>Separated</option>
                    <option value="engaged" {% if person.marital_status == 'engaged' %}selected{% endif %}>Engaged</option>
                    <option value="unknown" {% if person.marital_status == 'unknown' %}selected{% endif %}>Unknown</option>
                </select>
            </label>
            <label>Spouse First Name: <input name="spouse_first_name" value="{{ person.spouse_first_name }}"></label>
            <label>Spouse Last Name: <input name="spouse_last_name" value="{{ person.spouse_last_name }}"></label>
            <label>People Pipeline:
                <select name="people_pipeline">
                    <option value="">None</option>
                    <option value="PROMOTION" {% if person.people_pipeline == 'PROMOTION' %}selected{% endif %}>Promotion</option>
                    <option value="INFORMATION" {% if person.people_pipeline == 'INFORMATION' %}selected{% endif %}>Information</option>
                    <option value="INVITATION" {% if person.people_pipeline == 'INVITATION' %}selected{% endif %}>Invitation</option>
                    <option value="CONFIRMATION" {% if person.people_pipeline == 'CONFIRMATION' %}selected{% endif %}>Confirmation</option>
                    <option value="AUTOMATION" {% if person.people_pipeline == 'AUTOMATION' %}selected{% endif %}>Automation</option>
                </select>
            </label>
            <label>Priority:
                <select name="priority">
                    <option value="">None</option>
                    <option value="urgent" {% if person.priority == 'urgent' %}selected{% endif %}>Urgent</option>
                    <option value="high" {% if person.priority == 'high' %}selected{% endif %}>High</option>
                    <option value="medium" {% if person.priority == 'medium' %}selected{% endif %}>Medium</option>
                    <option value="low" {% if person.priority == 'low' %}selected{% endif %}>Low</option>
                </select>
            </label>
            <label>Assigned To:
                <select name="assigned_to">
                    <option value="UNASSIGNED" {% if person.assigned_to == 'UNASSIGNED' %}selected{% endif %}>Unassigned</option>
                    <option value="BILL JONES" {% if person.assigned_to == 'BILL JONES' %}selected{% endif %}>Bill Jones</option>
                    <option value="JASON MODOMO" {% if person.assigned_to == 'JASON MODOMO' %}selected{% endif %}>Jason Modomo</option>
                    <option value="KEN KATAYAMA" {% if person.assigned_to == 'KEN KATAYAMA' %}selected{% endif %}>Ken Katayama</option>
                    <option value="MATTHEW RULE" {% if person.assigned_to == 'MATTHEW RULE' %}selected{% endif %}>Matthew Rule</option>
                    <option value="CHIP ATKINSON" {% if person.assigned_to == 'CHIP ATKINSON' %}selected{% endif %}>Chip Atkinson</option>
                    <option value="RACHEL LIVELY" {% if person.assigned_to == 'RACHEL LIVELY' %}selected{% endif %}>Rachel Lively</option>
                    <option value="JIM BURCHEL" {% if person.assigned_to == 'JIM BURCHEL' %}selected{% endif %}>Jim Burchel</option>
                    <option value="JILL WALKER" {% if person.assigned_to == 'JILL WALKER' %}selected{% endif %}>Jill Walker</option>
                </select>
            </label>
            <label>Source:
                <select name="source">
                    <option value="">None</option>
                    <option value="WEBFORM" {% if person.source == 'WEBFORM' %}selected{% endif %}>Webform</option>
                    <option value="INCOMING CALL" {% if person.source == 'INCOMING CALL' %}selected{% endif %}>Incoming Call</option>
                    <option value="EMAIL" {% if person.source == 'EMAIL' %}selected{% endif %}>Email</option>
                    <option value="SOCIAL MEDIA" {% if person.source == 'SOCIAL MEDIA' %}selected{% endif %}>Social Media</option>
                    <option value="COLD CALL" {% if person.source == 'COLD CALL' %}selected{% endif %}>Cold Call</option>
                    <option value="PERSPECTIVES" {% if person.source == 'PERSPECTIVES' %}selected{% endif %}>Perspectives</option>
                    <option value="REFERAL" {% if person.source == 'REFERAL' %}selected{% endif %}>Referral</option>
                    <option value="OTHER" {% if person.source == 'OTHER' %}selected{% endif %}>Other</option>
                    <option value="UNKNOWN" {% if person.source == 'UNKNOWN' %}selected{% endif %}>Unknown</option>
                </select>
            </label>
            <label>Referred By: <input name="referred_by" value="{{ person.referred_by }}"></label>
            <label>Info Given: <textarea name="info_given">{{ person.info_given }}</textarea></label>
            <label>Desired Service: <textarea name="desired_service">{{ person.desired_service }}</textarea></label>
            <label>Initial Notes: <textarea name="initial_notes">{{ person.initial_notes }}</textarea></label>
            <label>Reason Closed: <textarea name="reason_closed">{{ person.reason_closed }}</textarea></label>
            <label>Date Closed: <input type="date" name="date_closed" value="{{ person.date_closed }}"></label>
            <label>
                <input type="checkbox" name="virtuous" value="true" {% if person.virtuous %}checked{% endif %}> Virtuous
            </label>
            <div class="button-group">
                <button type="submit" class="button primary">Save Changes</button>
                <a href="{{ url_for('people_bp.people') }}" class="button">Back to People</a>
            </div>
        </div>
    </form>
{% endblock %}

{% block styles %}
<style>
.detail-view {
    margin-bottom: 2rem;
}

.detail-view dt {
    font-weight: bold;
    margin-top: 1rem;
}

.detail-view dd {
    margin-left: 1rem;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    max-width: 600px;
    margin: 0 auto;
}

.form-group label {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.form-group input,
.form-group select,
.form-group textarea {
    padding: 0.5rem;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.form-group textarea {
    min-height: 100px;
}

.button-group {
    display: flex;
    gap: 1rem;
    margin-top: 1rem;
}
</style>
{% endblock %}
